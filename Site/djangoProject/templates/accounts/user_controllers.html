{% extends "base.html" %}
{% load static %}

{% block title %}–ú–æ–∏ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã{% endblock %}

{% block content %}
<div class="container">
    <h2 class="text-center my-4">–ú–æ–∏ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã</h2>
    <div class="row justify-content-center">
        <div class="col-12">
            {% if data %}
                <div class="row justify-content-center">
                    {% for item in data %}
                        <div class="col-md-6 mb-4">
                            <div class="card shadow-sm border-0 h-100">
                                <div class="card-body d-flex flex-column">
                                    <h5 class="card-title text-center">üêù –£–ª–µ–π {{ forloop.counter }}</h5>
                                    <div class="row mb-3">
                                        <div class="col-6 text-left font-weight-bold">üìü IMEI:</div>
                                        <div class="col-6 text-right">{{ item.controller.imai }}</div>
                                    </div>
                                    {% if item.latest_record %}
                                        <div class="row mb-3">
                                            <div class="col-6 text-left font-weight-bold">üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:</div>
                                            <div class="col-6 text-right dynamic-value {% if item.latest_record.temperature < 25 or item.latest_record.temperature > 37 %}text-warning{% else %}text-success{% endif %}">
                                                {{ item.latest_record.temperature }}¬∞C
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-6 text-left font-weight-bold">üíß –í–ª–∞–∂–Ω–æ—Å—Ç—å:</div>
                                            <div class="col-6 text-right dynamic-value">{{ item.latest_record.humidity }}%</div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-6 text-left font-weight-bold">‚öñÔ∏è –ú–∞—Å—Å–∞:</div>
                                            <div class="col-6 text-right dynamic-value">{{ item.latest_record.weight }}kg</div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-6 text-left font-weight-bold">üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –º–∞—Å—Å—ã:</div>
                                            <div class="col-6 text-right dynamic-value">{{ item.delta_mass }}kg</div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-6 text-left font-weight-bold">‚ö†Ô∏è –°—Ç–∞—Ç—É—Å:</div>
                                            <div class="col-6 text-right">
                                                {% if item.latest_record.temperature < 25 or item.latest_record.temperature > 37 or item.delta_mass > 5 %}
                                                    <span class="text-warning">–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ</span>
                                                {% else %}
                                                    <span class="text-success">–ù–æ—Ä–º–∞–ª—å–Ω—ã–π</span>
                                                {% endif %}
                                            </div>
                                        </div>
                                        <div class="text-center mt-auto">
                                            <a href="{% url 'controller_details' item.controller.id %}" class="btn btn-primary mt-3">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                                        </div>
                                    {% else %}
                                        <div class="text-center mb-3 flex-grow-1 d-flex flex-column justify-content-center">
                                            <span class="display-1">‚úñÔ∏è</span>
                                            <p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</p>
                                        </div>
                                        <div class="text-center mt-auto">
                                            <a href="#" class="btn btn-secondary mt-3 disabled">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <p class="text-center">–£ –≤–∞—Å –Ω–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
